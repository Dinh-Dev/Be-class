<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ChÃºc má»«ng sinh nháº­t tháº§y</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<audio id="music" src="happy.mp3"></audio>

<div class="start" id="start">
    <div class="envelope" onclick="openEnvelope()">
        <div class="flap"></div>
    </div>
    <div class="open-text">Tháº§y hÃ£y má»Ÿ thÆ°</div>
</div>

<div class="letter" id="letter">
    <div class="letter-decor ld1">ðŸŽ‚</div>
    <div class="letter-decor ld2">ðŸŽ†</div>
    <div class="letter-decor ld3">ðŸ§¸</div>
    <div class="typing" id="typing"></div>
</div>

<img src="Be class.jpg" class="final-img" id="finalImg">

<script>
const text=`KÃ­nh gá»­i tháº§y kÃ­nh máº¿n,

NhÃ¢n ngÃ y sinh nháº­t cá»§a tháº§y,
chÃºng em kÃ­nh chÃºc tháº§y
luÃ´n máº¡nh khá»e, háº¡nh phÃºc,
vÃ  trÃ n Ä‘áº§y nhiá»‡t huyáº¿t.

ChÃºc tháº§y mÃ£i lÃ  ngÆ°á»i
truyá»n cáº£m há»©ng
vÃ  Ã¡nh sÃ¡ng tri thá»©c
cho cÃ¡c tháº¿ há»‡ há»c trÃ².`;

const mathList=[
"xÂ² + 2x + 1 = 0",
"aÂ² + bÂ² = cÂ²",
"S = Ï€rÂ²",
"âˆ A + âˆ B + âˆ C = 180Â°",
"Î”ABC cÃ¢n táº¡i A"
];

const cakes=["ðŸŽ‚","ðŸ°","ðŸ§"];
const decors=["ðŸŽ‰","ðŸŽ†","âœ¨","ðŸŽˆ"];
let i=0;

function openEnvelope(){
    document.querySelector('.envelope').classList.add('open');
    music.play();

    setTimeout(()=>{
        start.style.display='none';
        letter.style.display='block';
        typeText();

        setInterval(spawnFirework,260);
        setInterval(spawnCake,420);
        setInterval(spawnDecor,520);
        setInterval(spawnMath,900);
    },1000);
}

function typeText(){
    if(i<text.length){
        typing.innerHTML+=text.charAt(i++);
        setTimeout(typeText,55);
    }else{
        setTimeout(showImage,3500);
    }
}

function randomFly(el,duration){
    const dirs=["fromLeft","fromRight","fromBottom","fromTop"];
    const d=dirs[Math.floor(Math.random()*dirs.length)];
    el.style.left=Math.random()*innerWidth+'px';
    el.style.top=Math.random()*innerHeight+'px';
    el.style.animation=`${d} ${duration}s linear forwards`;
}

function spawnMath(){
    const m=document.createElement('div');
    m.className='math';
    m.innerText=mathList[Math.floor(Math.random()*mathList.length)];
    randomFly(m,14);
    document.body.appendChild(m);
    setTimeout(()=>m.remove(),14000);
}

function spawnCake(){
    const c=document.createElement('div');
    c.className='cake';
    c.innerText=cakes[Math.floor(Math.random()*cakes.length)];
    randomFly(c,10);
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),10000);
}

function spawnDecor(){
    const d=document.createElement('div');
    d.className='decor';
    d.innerText=decors[Math.floor(Math.random()*decors.length)];
    randomFly(d,12);
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),12000);
}

function spawnFirework(){
    const f=document.createElement('div');
    f.className='firework';
    f.style.left=Math.random()*innerWidth+'px';
    f.style.top=Math.random()*innerHeight+'px';
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),2200);
}

function showImage(){
    letter.style.display='none';
    finalImg.style.display='block';
}
</script>

</body>
</html>
