*{box-sizing:border-box}

body{
    margin:0;
    height:100vh;
    background:linear-gradient(135deg,#ffd6e0,#ffe5ec);
    font-family:'Segoe UI',sans-serif;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
}

/* ===== PHONG THƯ ===== */
.start{text-align:center; z-index:10}

.envelope{
    width:340px;
    height:220px;
    background:#ff8fab;
    position:relative;
    cursor:pointer;
    box-shadow:0 20px 40px rgba(0,0,0,.3);
}

.flap{
    position:absolute;
    top:0;
    width:100%;
    height:110px;
    background:#ff5d8f;
    clip-path:polygon(0 0,100% 0,50% 100%);
    transform-origin:top;
    transition:1s;
}

.envelope.open .flap{transform:rotateX(180deg)}

.open-text{
    margin-top:20px;
    font-size:22px;
    font-weight:bold;
    color:#7a003c;
}

/* ===== LÁ THƯ ===== */
.letter{
    display:none;
    position:absolute;
    background:white;
    width:75%;
    max-width:850px;
    padding:50px;
    text-align:center;
    box-shadow:0 25px 50px rgba(0,0,0,.35);
    z-index:5;
    overflow:hidden;
}

.letter-decor{
    position:absolute;
    font-size:120px;
    opacity:0.18;
}
.ld1{top:20px; left:30px}
.ld2{bottom:30px; right:40px}
.ld3{top:50%; left:50%; transform:translate(-50%,-50%)}

.typing{
    font-size:22px;
    line-height:1.9;
    white-space:pre-line;
    min-height:240px;
    position:relative;
    z-index:2;
}

/* ===== TOÁN ===== */
.math{
    position:absolute;
    font-size:32px;
    font-weight:900;
    color:#4b0028;
    text-shadow:0 0 14px rgba(255,255,255,.9);
}

/* ===== PHÁO HOA ===== */
.firework{
    position:absolute;
    width:14px;
    height:14px;
    border-radius:50%;
    animation:boom 2.2s forwards;
}

@keyframes boom{
    to{
        box-shadow:
        180px -180px #ff004c,
        -180px -180px #ffd500,
        220px 90px #00eaff,
        -220px 90px #9d00ff,
        140px 220px #00ff6a,
        -140px 220px #ff9f00;
        opacity:0;
    }
}

/* ===== ICON BAY ===== */
.cake,.decor{
    position:absolute;
    font-size:48px;
    text-shadow:0 0 16px rgba(255,255,255,.9);
}

/* ===== 4 HƯỚNG BAY ===== */
@keyframes fromLeft{
    from{transform:translateX(-120vw)}
    to{transform:translateX(120vw); opacity:0}
}
@keyframes fromRight{
    from{transform:translateX(120vw)}
    to{transform:translateX(-120vw); opacity:0}
}
@keyframes fromBottom{
    from{transform:translateY(120vh)}
    to{transform:translateY(-120vh); opacity:0}
}
@keyframes fromTop{
    from{transform:translateY(-120vh)}
    to{transform:translateY(120vh); opacity:0}
}

/* ===== ẢNH CUỐI ===== */
.final-img{
    display:none;
    position:absolute;
    max-width:70%;
    max-height:70%;
    opacity:0;
    animation:finalShow 4s ease forwards;
}

@keyframes finalShow{
    from{opacity:0; transform:scale(.8)}
    to{opacity:1; transform:scale(1)}
}

@media(max-width:768px){
    .letter{width:90%; padding:25px}
    .typing{font-size:18px}
}